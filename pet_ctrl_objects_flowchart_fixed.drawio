<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="PET DDL Flowchart">
    <mxGraphModel dx="1420" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Nodes -->
        <mxCell id="A" value="Start: Run pet_ctrl_objects_ddl" style="ellipse;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="20" width="180" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="B" value="Database exists?" style="rhombus;fillColor=#fff2cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="C" value="create_asset() -&gt; External DB" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="20" y="200" width="200" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="D" value="Skip DB create" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="240" y="200" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="E" value="Iterate PET Tables" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="130" y="300" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="F" value="Table exists?" style="rhombus;fillColor=#fff2cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="150" y="400" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="G" value="Skip creation" style="rectangle;fillColor=#f5f5f5;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="-20" y="500" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="H" value="Generate DDL with identity" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="200" y="500" width="200" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="I" value="Try CREATE TABLE" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="240" y="600" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="K" value="Retry without identity" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="500" y="600" width="200" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="J" value="Describe Location" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="240" y="700" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="L" value="Location = DBFS?" style="rhombus;fillColor=#fff2cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="260" y="800" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="M" value="Raise error -&gt; Use drop_and_recreate_tables()" style="rectangle;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="20" y="900" width="320" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="N" value="Table OK" style="rectangle;fillColor=#d5e8d4;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="400" y="900" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="O" value="Finish" style="ellipse;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="240" y="1000" width="120" height="40" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" edge="1" source="A" target="B" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e2" value="No" edge="1" source="B" target="C" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e3" value="Yes" edge="1" source="B" target="D" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e4" edge="1" source="C" target="E" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e5" edge="1" source="D" target="E" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e6" edge="1" source="E" target="F" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e7" value="Yes" edge="1" source="F" target="G" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e8" value="No" edge="1" source="F" target="H" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e9" edge="1" source="H" target="I" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e10" value="Success" edge="1" source="I" target="J" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e11" value="Fail + Identity cols" edge="1" source="I" target="K" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e12" edge="1" source="K" target="J" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e13" edge="1" source="J" target="L" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e14" value="Yes" edge="1" source="L" target="M" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e15" value="No" edge="1" source="L" target="N" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e16" edge="1" source="M" target="O" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e17" edge="1" source="N" target="O" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
